(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{9726:(e,t,s)=>{Promise.resolve().then(s.bind(s,4969))},4969:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(7437),a=s(6936),r=s(2265);function i(){let{state:e,addAssignment:t,removeAssignment:s}=(0,a.o)(),[i,l]=(0,r.useState)({});(0,r.useEffect)(()=>{let t={};[...e.tokens,...e.nfts].forEach(s=>{let n="".concat(s.chainId,":").concat("address"in s?s.address:s.contract,":").concat("tokenId"in s?s.tokenId:"token"),a=e.assignments.find(e=>e.assetKey===n);if(a){let e={};a.splits.forEach(t=>{e[t.beneficiaryId]=t.pct}),t[n]=e}else{let s=e.beneficiaries.length>0?100/e.beneficiaries.length:0,a={};e.beneficiaries.forEach(e=>{a[e.id]=s}),t[n]=a}}),l(t)},[e.tokens,e.nfts,e.beneficiaries,e.assignments]);let c=(e,t,s)=>{l(n=>({...n,[e]:{...n[e],[t]:s}}))},o=e=>Object.values(i[e]||{}).reduce((e,t)=>e+t,0),d=e=>"symbol"in e?"".concat(e.symbol," (").concat(e.name,")"):"".concat(e.name||"NFT #".concat(e.tokenId)," (").concat(e.collection,")"),u=[...e.tokens,...e.nfts];return 0===u.length?(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Asset Assignments"}),(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("p",{className:"text-gray-500 mb-4",children:"No assets found. Please load assets first."}),(0,n.jsx)("a",{href:"/assets",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go to Assets"})]})]}):0===e.beneficiaries.length?(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Asset Assignments"}),(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("p",{className:"text-gray-500 mb-4",children:"No beneficiaries found. Please add beneficiaries first."}),(0,n.jsx)("a",{href:"/beneficiaries",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go to Beneficiaries"})]})]}):(0,n.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Asset Assignments"}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,n.jsx)("h2",{className:"font-semibold text-blue-800 mb-2",children:"Assignment Instructions"}),(0,n.jsx)("p",{className:"text-blue-700 text-sm",children:"Assign percentage ownership of each asset to your beneficiaries. The total for each asset must equal 100%."})]}),(0,n.jsx)("div",{className:"space-y-6",children:u.map(t=>{let s="".concat(t.chainId,":").concat("address"in t?t.address:t.contract,":").concat("tokenId"in t?t.tokenId:"token"),a=o(s),r=.1>Math.abs(a-100);return(0,n.jsxs)("div",{className:"border rounded-lg p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:d(t)}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"symbol"in t?"Balance: ".concat(t.balance," ").concat(t.symbol):"Token ID: ".concat(t.tokenId)})]}),(0,n.jsxs)("div",{className:"px-3 py-1 rounded text-sm font-medium ".concat(r?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[a.toFixed(1),"%"]})]}),(0,n.jsx)("div",{className:"grid gap-4",children:e.beneficiaries.map(e=>{var t;return(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:e.name}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:e.addressOrEns})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",className:"w-20 border rounded px-2 py-1 text-sm",value:(null===(t=i[s])||void 0===t?void 0:t[e.id])||0,onChange:t=>c(s,e.id,parseFloat(t.target.value)||0)}),(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"%"})]})]},e.id)})})]},s)})}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("div",{className:"text-sm text-gray-600",children:Object.keys(i).every(e=>.1>Math.abs(o(e)-100))?(0,n.jsx)("span",{className:"text-green-600",children:"✓ All assignments are complete (100%)"}):(0,n.jsx)("span",{className:"text-red-600",children:"⚠ Some assignments are incomplete"})}),(0,n.jsxs)("div",{className:"space-x-3",children:[(0,n.jsx)("button",{onClick:()=>{Object.entries(i).forEach(e=>{let[s,n]=e;t({assetKey:s,splits:Object.entries(n).map(e=>{let[t,s]=e;return{beneficiaryId:t,pct:s}})})}),alert("Assignments saved successfully!")},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save Assignments"}),(0,n.jsx)("a",{href:"/generate",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Continue to Generate →"})]})]})]})]})}},6936:(e,t,s)=>{"use strict";s.d(t,{o:()=>l});var n=s(9099),a=s(2290);let r={owner:{fullName:""},wallets:[],tokens:[],nfts:[],beneficiaries:[],assignments:[]};function i(e){localStorage.setItem("lastwish",JSON.stringify(e))}let l=(0,n.Ue)((e,t)=>({state:function(){try{{let e=localStorage.getItem("lastwish");return e?JSON.parse(e):r}}catch(e){return r}}(),setOwner:t=>e(e=>{let s={...e.state,owner:{...e.state.owner,...t}};return i(s),{state:s}}),addBeneficiary:t=>e(e=>{let s={id:(0,a.x0)(),name:t.name||"Unnamed",addressOrEns:t.addressOrEns,email:t.email,relationship:t.relationship,phoneNumber:t.phoneNumber,physicalAddress:t.physicalAddress},n={...e.state,beneficiaries:[...e.state.beneficiaries,s]};return i(n),{state:n}}),removeBeneficiary:t=>e(e=>{let s={...e.state,beneficiaries:e.state.beneficiaries.filter(e=>e.id!==t)};return i(s),{state:s}}),setTokens:t=>e(e=>{let s={...e.state,tokens:t};return i(s),{state:s}}),setNfts:t=>e(e=>{let s={...e.state,nfts:t};return i(s),{state:s}}),addWallet:t=>e(e=>{let s={id:(0,a.x0)(),address:t.address||"",ens:t.ens,blockchain:t.blockchain,walletType:t.walletType},n={...e.state,wallets:[...e.state.wallets,s]};return i(n),{state:n}}),removeWallet:t=>e(e=>{let s={...e.state,wallets:e.state.wallets.filter(e=>e.id!==t)};return i(s),{state:s}}),addAssignment:t=>e(e=>{let s={...e.state,assignments:[...e.state.assignments.filter(e=>e.assetKey!==t.assetKey),t]};return i(s),{state:s}}),removeAssignment:t=>e(e=>{let s={...e.state,assignments:e.state.assignments.filter(e=>e.assetKey!==t)};return i(s),{state:s}}),setPayment:t=>e(e=>{let s={...e.state,payment:t};return i(s),{state:s}}),reset:()=>e(()=>(i(r),{state:r}))}))},2685:(e,t,s)=>{"use strict";var n=s(2265),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=n.useState,i=n.useEffect,l=n.useLayoutEffect,c=n.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!a(e,s)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),n=r({inst:{value:s,getSnapshot:t}}),a=n[0].inst,d=n[1];return l(function(){a.value=s,a.getSnapshot=t,o(a)&&d({inst:a})},[e,s,t]),i(function(){return o(a)&&d({inst:a}),e(function(){o(a)&&d({inst:a})})},[e]),c(s),s};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},4959:(e,t,s)=>{"use strict";var n=s(2265),a=s(4239),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,l=n.useRef,c=n.useEffect,o=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,s,n,a){var u=l(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;var f=i(e,(u=o(function(){function e(e){if(!c){if(c=!0,i=e,e=n(e),void 0!==a&&m.hasValue){var t=m.value;if(a(t,e))return l=t}return l=e}if(t=l,r(i,e))return t;var s=n(e);return void 0!==a&&a(t,s)?t:(i=e,l=s)}var i,l,c=!1,o=void 0===s?null:s;return[function(){return e(t())},null===o?void 0:function(){return e(o())}]},[t,s,n,a]))[0],u[1]);return c(function(){m.hasValue=!0,m.value=f},[f]),d(f),f}},4239:(e,t,s)=>{"use strict";e.exports=s(2685)},1290:(e,t,s)=>{"use strict";e.exports=s(4959)},2290:(e,t,s)=>{"use strict";s.d(t,{x0:()=>n});let n=(e=21)=>{let t="",s=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&s[e]];return t}},9099:(e,t,s)=>{"use strict";s.d(t,{Ue:()=>m});let n=e=>{let t;let s=new Set,n=(e,n)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=n?n:"object"!=typeof a||null===a)?a:Object.assign({},t,a),s.forEach(s=>s(t,e))}},a=()=>t,r={setState:n,getState:a,getInitialState:()=>i,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},i=t=e(n,a,r);return r},a=e=>e?n(e):n;var r=s(2265),i=s(1290);let{useDebugValue:l}=r,{useSyncExternalStoreWithSelector:c}=i,o=!1,d=e=>e,u=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?a(e):e,s=(e,s)=>(function(e,t=d,s){s&&!o&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),o=!0);let n=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return l(n),n})(t,e,s);return Object.assign(s,t),s},m=e=>e?u(e):u}},e=>{var t=t=>e(e.s=t);e.O(0,[130,215,744],()=>t(9726)),_N_E=e.O()}]);